/*! Storer.js
 * @copyright Viafoura, Inc. <viafoura.com>
 * @author Shahyar G <github.com/shahyar> for <github.com/viafoura>
 * @license CC-BY 3.0 <creativecommons.org/licenses/by/3.0>: Keep @copyright, @author intact.
 */function initStorer(a,b){"use strict";function c(a,b,c,d){return null===b||void 0===b||a&&parseInt(+new Date/1e3,10)>parseInt(a,10)?(c(d),null):void 0!==b._end?b.value:b}function d(a,b,d){try{var e=a&&JSON.parse(a);if(e&&void 0!==e._end)return c(e._end,e.value,b,d)}catch(f){}return a}function e(a,b,c){var d=parseInt(+new Date/1e3,10);switch(typeof b){case"number":b=b&&parseInt(d/1e3+b,10);break;case"string":b=b.length>4&&""+parseInt(b,10)===b?parseInt(b,10):parseInt(+new Date(b)/1e3,10);break;case"object":b.toGMTString&&(b=parseInt(+b/1e3,10));break;default:b=null}return a={value:b&&d>b?null:a,_end:b||null},c?JSON.stringify(a):a}function f(a,b){var c={STORE_TYPE:"ref"+a,key:function(a){return b.key(a)},getItem:function(a){return d(b.getItem(a),this._removeItem||this.removeItem,a)},setItem:function(a,c,d){return b.setItem(a,e(c,d,!0))},removeItem:function(a){return b.removeItem(a)},clear:function(){return b.clear()}};return Object.defineProperty(c,"length",{get:function(){return b.length}}),c}function g(a,b){var c=document.createElement("div");return c.STORE_TYPE="DOM"+a,c.key=b.key,c.removeItem=b.removeItem,c.clear=b.clear,c.getItem=function(a){return d(b.getItem(a),this._removeItem||this.removeItem,a)},c.setItem=function(a,c,d){return b.setItem(a,e(c,d,!0))},Object.defineProperty(c,"length",{get:function(){return b.length}}),c}function h(a){a=(a||"")+q;var c=new RegExp("(?:^|;)\\s*"+a+"[^=;]+\\s*(?:=[^;]*)?","g"),d=new RegExp("^;?\\s*"+a),f=new RegExp("(?:^|;)\\s*[^=;]+\\s*(?:=[^;]*)?","g"),g=new RegExp("^;?\\s*"),h=new Date(1979).toGMTString(),j={STORE_TYPE:"cookieStorage",DEFAULT_DOMAIN:escape(b.default_domain||""),DEFAULT_PATH:escape(b.default_path||""),length:0,key:function(a,b){var c=this.getAll(!1,b);return c[0]?c[0].key:void 0},clear:function(a){for(var b=this.getAll(!1,a),c=b.length;c--;)this.removeItem(b[c].key)},getAll:function(a,b){var e,h=b?g:d,i=document.cookie.match(b?f:c)||[],j=i.length;if(a===!0)for(e={length:j};j--;)e[unescape((i[j]=i[j].split("="))[0].replace(h,""))]=i[j][1];else for(e=[];j--;)e.push({key:unescape((i[j]=i[j].split("="))[0].replace(h,"")),value:i[j][1]});return e},getItem:function(b,c){return b&&this.hasItem(b,c)?(c=document.cookie.match(new RegExp("(?:^|;) *"+escape((c?"":a)+b)+"=([^;]*)(?:;|$)")),c&&c[0]?unescape(c[1]):null):null},setItem:function(b,c,d,f,g,h,i){if(!b||"expires"===b||"max-age"===b||"path"===b||"domain"===b||"secure"===b)return!1;var l="",m=e(c,d);return null!==m._end&&(l="; expires="+new Date(1e3*m._end).toGMTString()),null!==m.value&&void 0!==c&&null!==c?(g=(g="string"==typeof g?escape(g):j.DEFAULT_DOMAIN)?"; domain="+g:"",f=(f="string"==typeof f?escape(f):j.DEFAULT_PATH)?"; path="+f:"",document.cookie=escape((i?"":a)+b)+"="+escape(c)+l+g+f+(h?"; secure":""),k(),!0):j.removeItem(b,g,f,h,i)},removeItem:function(b,c,d,e,f){b&&this.hasItem(b,f)&&(c=(c="string"==typeof c?escape(c):j.DEFAULT_DOMAIN)?"; domain="+c:"",d=(d="string"==typeof d?escape(d):j.DEFAULT_PATH)?"; path="+d:"",document.cookie=escape((f?"":a)+b)+"=; expires="+h+c+d+(e?"; secure":""),k())},hasItem:function(b,c){return new RegExp("(?:^|;) *"+escape((c?"":a)+b)+"=").test(document.cookie)}},k=function(){j.length=j.getAll().length};return j.setItem(o,4),4==j.getItem(o)?(j.removeItem(o),j):i()}function i(){var a={},b=[],d={},f={STORE_TYPE:"memoryStorage",length:0,key:function(a){return b[a]},getItem:function(b){return c(a[b]&&a[b]._end,a[b],this._removeItem||this.removeItem,b)},setItem:function(c,g,h){return null!==g&&void 0!==g?(void 0===d[c]&&(d[c]=(f.length=b.push(c))-1),(a[c]=e(g,h)).value):f.removeItem(c)},removeItem:function(c){var e=void 0!==a[c];if(void 0!==d[c]){for(var g=b.length;--g>d[c];)d[b[g]]--;b.splice(d[c],1),delete d[c]}return delete a[c],f.length=b.length,e},clear:function(){for(var c in a)a.hasOwnProperty(c)&&delete a[c];f.length=b.length=0,d={}}};return f}function j(a){function b(){var b=a.name,c=b.indexOf(m),d=b.indexOf(n),e=y.length;for(c>-1&&d>c&&(a.name=b.slice(0,c)+b.slice(d+u)),b="";e--;)x[y[e]]&&x[y[e]].value&&(b+=o+(""+y[e]).length+":"+(""+x[y[e]].value).length+q+y[e]+q+x[y[e]].value+r);a.name+=m+encodeURI(g.encode(f,b))+n}function d(){var c=a.name,d=c.indexOf(m),e=c.indexOf(n),h=0,i="",j=0,k=0;if(d>-1&&e>d)for(a.name=c.slice(0,d)+c.slice(e+u),c=g.decode(f,decodeURI(c.slice(d+t,e)));-1!==(d=c.indexOf(o,h));)h=d+v,-1!==(e=c.indexOf(q,h))&&(j=c.slice(h,e).split(":"),k=parseInt(j[1],10),j=parseInt(j[0],10),h=e+w,(e=c.indexOf(q,h))===h+j&&(i=c.substr(h,j),h=e+w,(e=c.indexOf(r,h))===h+k&&z.setItem(i,c.substr(h,k))));a.addEventListener?a.addEventListener("beforeunload",b,!0):a.attachEvent&&a.attachEvent("onbeforeunload",b)}a||(a=p);var f,g=function(a,b,c){return{decode:function(a,b){return this.encode(a,b)},encode:function(c,d){for(var e,f=c.length,g=d.length,h=[],i=[],j=0,k=0,l=0,m=0;256>j;j++)i[j]=j;for(j=0;256>j;j++)k=(k+(e=i[j])+c.charCodeAt(j%f))%256,i[j]=i[k],i[k]=e;for(k=0;g>l;l++)j=l%256,k=(k+(e=i[j]))%256,f=i[j]=i[k],i[k]=e,h[m++]=d.charCodeAt(l)^i[(f+e)%256];return b.apply(a,h)},key:function(d){for(var e=0,f=[];d>e;e++)f[e]=1+(255*c()<<0);return b.apply(a,f)}}}(String,String.fromCharCode,Math.random),h="[object Opera]"===Object.prototype.toString.call(window.opera);try{f=decodeURI(k.getItem(".sessionStorageKey"))}catch(i){}f&&f.length===s||(f=g.key(s),k.setItem(".sessionStorageKey",encodeURI(f)));var j=a.document.domain,l=g.encode(f,j),m="#"+String.fromCharCode(1)+"STOR/"+l,n=l+"/STOR"+String.fromCharCode(4)+"#",o=String.fromCharCode(2)+";",q=String.fromCharCode(23)+";",r=";"+String.fromCharCode(3),s=32,t=m.length,u=n.length,v=o.length,w=q.length,x=(r.length,{}),y=[],z={STORE_TYPE:"name",length:0,key:function(a){return y[a]},getItem:function(a){return c(x[a]&&x[a]._end,x[a],this._removeItem||this.removeItem,a)},setItem:function(a,c,d){var f=e(c,d)._end;return null===f.value?this.removeItem(a):(x[a]?(x[a].value=c,x[a]._end=f._end):x[a]={value:c,index:(z.length=y.push(a))-1,_end:e(null,d)._end},h&&b(),c)},removeItem:function(a){if(x[a]){if(y[x[a].index]===a){y.splice(x[a].index,1),z.length=y.length;for(var c=x[a].index,d=y.length;d>c;c++)x[y[c]].index--}return delete x[a],h&&b(),!0}return!1},clear:function(){y.length=0,x={},h&&b()}};try{d()}catch(i){}return z}var k,l,m,n,o="__SG__",p=window,q=(b="[object Object]"===Object.prototype.toString.call(a)?a:b||{}).prefix||"",r=b.no_cookie_fallback||!1,s=!0;b===a&&(a=null);try{for(;p!==p.top;)p=p.top}catch(t){}var u={cookieStorage:null,localStorage:null,memoryStorage:null,sessionStorage:null,_createCookieStorage:h,_createMemoryStorage:i};return u.cookieStorage=k=h(),u.memoryStorage=m=i(),u.sessionStorage=n=function(){var a=p.sessionStorage;if(a)try{a.setItem(o,1),a.removeItem(o);var b=function(){};b.prototype=a,b=new b;try{b.getItem&&(b.setItem(o,2),b.removeItem(o))}catch(c){b=null}a=b&&!b.getItem?g("sessionstorage",a):b&&"[object StoragePrototype]"!==Object.prototype.toString.apply(Storage.prototype)?b:f("sessionstorage",a)}catch(c){a=null}if(!a){try{a=j(),a.setItem(o,2),2==a.getItem(o)?a.removeItem(o):a=null}catch(c){a=null}a||(a=i())}return a._getItem=a.getItem,a._setItem=a.setItem,a._removeItem=a.removeItem,a._key=a.key,a.getItem=function(b){return a._getItem(q+b)},a.setItem=function(b,c,d){return a._setItem(q+b,c,d)},a.removeItem=function(b){return a._removeItem(q+b)},a.key=function(b){return void 0!==(b=a._key(b))&&null!==b?0===b.indexOf(q)?b.substr(q.length):b:null},a.clear=function(){for(var b,c=a.length;c--;)0===(b=a._key(c)).indexOf(q)&&a._removeItem(b)},a}(),u.localStorage=l=function(){var b;if(p.localStorage||p.globalStorage)try{b=p.localStorage||p.globalStorage[location.hostname],b.setItem(o,1),b.removeItem(o);var d=function(){};d.prototype=b,d=new d;try{d.getItem&&(d.setItem(o,2),d.removeItem(o))}catch(j){d=null}b=d&&!d.getItem?g("localstorage",b):d&&"[object StoragePrototype]"!==Object.prototype.toString.apply(Storage.prototype)?d:f("localstorage",b)}catch(j){b=null}return b||(b=function(){var d=function(a){return"PS"+a.replace(f,"__").replace(g,"_s")},f=/_/g,g=/ /g,j=d(q+"uData"),k=d("Storer");if(window.ActiveXObject)try{var m={},n=[],p={},t={STORE_TYPE:"userData",length:0,key:function(a){return n[a]},getItem:function(a){var b=d(a);return c(v.getAttribute("_end_"+b),v.getAttribute(b),this._removeItem||this.removeItem,a)},setItem:function(a,b,c){if(null!==b&&void 0!==b){var f=d(a),g=e(b,c);if(null!==g.value)return v.setAttribute(f,b),v.setAttribute("_end_"+f,""+g._end),void 0===p[a]&&(p[a]=(t.length=n.push(a))-1),v.save(j+k),m[a]=g.value}return(t._removeItem||t.removeItem)(a)},removeItem:function(a){var b=d(a);if(v.removeAttribute(b),v.removeAttribute("_end_"+b),void 0!==p[a]){for(var c=n.length;--c>p[a];)p[n[c]]--;n.splice(p[a],1),delete p[a]}v.save(j+k),t.length=n.length},clear:function(){for(var a,b=v.xmlDocument,c=b.firstChild.attributes,d=c.length;0<=--d;)a=c[d],delete m[a.nodeName],v.removeAttribute(a.nodeName),t.length--;v.save(j+k),t.length=n.length=0,m={},p={}}},v=document.createElement("input");v.style.display="none",v.addBehavior("#default#userData");var w="function"==typeof domReady?domReady:"undefined"!=typeof jQuery?jQuery(document).ready:!1;return s=!w,w&&w(function(){try{var c=document.body||document.getElementsByTagName("head")[0];if(c.appendChild(v),v.load(j+k),t.setItem(o,3),3==t.getItem(o)){t.removeItem(o);for(var d,e=v.xmlDocument,f=e.firstChild.attributes,g=-1,q=f.length;++g<q;)d=f[g],void 0!==d.nodeValue&&null!==d.nodeValue&&(p[d.nodeName]=n.push(d.nodeName)-1,m[d.nodeName]=d.nodeValue);u.localStorage=l=t,a&&a(u)}else t=null}catch(s){t=null}t||(u.localStorage=l=b=r?i():h("localStorage"),a&&a(u))}),t}catch(x){}}()),b||(b=r?i():h("localStorage")),q?(b._getItem=b.getItem,b._setItem=b.setItem,b._removeItem=b.removeItem,b._key=b.key,b.getItem=function(a){return b._getItem(q+a)},b.setItem=function(a,c,d){return b._setItem(q+a,c,d)},b.removeItem=function(a){return b._removeItem(q+a)},b.key=function(a){return void 0!==(a=b._key(a))&&null!==a?0===a.indexOf(q)?a.substr(q.length):a:null},b.clear=function(){for(var a,c=b.length;c--;)0===(a=b._key(c)).indexOf(q)&&b._removeItem(a)},b):b}(),s&&a&&a(u),u}window.initStorer=initStorer;